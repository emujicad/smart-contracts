# Counter Contract Tests (Counter.t.sol)

This Solidity contract (`Counter.t.sol`) contains the unit tests for the `Counter.sol` contract. It uses the Foundry testing framework, which is a powerful tool for writing efficient and robust smart contract tests. This file demonstrates how to test basic functions, error handling, and the use of fuzz testing.

## Key Features

*   **Test Setup (`setUp`)**: Initializes a new instance of the `Counter` contract before each test, ensuring a clean state.
*   **Increment Test**: Verifies that the `increment()` function correctly increases the counter's value.
*   **Decrement Test with Revert**: Demonstrates how to test that a function reverts with a specific error (in this case, an arithmetic underflow error).
*   **Fuzz Testing (`testFuzz_SetNumber`)**: Uses fuzzing to test the `setNumber()` function with a wide range of random inputs, which helps uncover unexpected bugs.

## Solidity and Foundry Concepts to Learn

*   **`pragma solidity ^0.8.13;`**: Defines the Solidity compiler version.
*   **`import {Test, console, stdError} from "forge-std/Test.sol";`**: Imports specific components from Foundry's standard test library.
    *   **`Test`**: The base contract for writing tests.
    *   **`console`**: For debugging (ej. `console.log`).
    *   **`stdError`**: Contains standard Solidity errors (ej. `stdError.arithmeticError`).
*   **`import {Counter} from "../../src/3_Formatter/Counter.sol";`**: Imports the `Counter` contract to be tested.
*   **`contract CounterTest is Test { ... }`**: Declaration of the test contract, inheriting from `Test`.
*   **`setUp()`**: Special function executed before each test function to set up the environment.
*   **`assertEq(expected, actual, "error message");`**: Assertion function to check if two values are equal. If not, the test fails, and the optional error message is displayed.
*   **`vm.expectRevert(errorType);`**: Foundry cheat code that expects the next function call to revert with the type of error specified.
*   **Fuzz Testing (`testFuzz_FunctionName(type param)`)**: A testing technique where the function is executed with random inputs generated by the fuzzer of Foundry. Fuzzing functions must start with `testFuzz_`.

## How the Tests Work

1.  **`setUp()`**: Deploys a new instance of the `Counter` contract and sets its initial number to 0.
2.  **`test_Increment()`**: Calls `increment()` and verifies that the number has become 1.
3.  **`test_Decrement()`**: Calls `decrement()` when the number is 0. Since Solidity 0.8.0+ automatically reverts on underflow, the transaction is expected to revert with an `stdError.arithmeticError`.
4.  **`testFuzz_SetNumber(uint256 x)`**: Foundry runs this test with many different values for `x`. For each `x`, `setNumber(x)` is called, and it's verified that the counter's value is exactly `x`. This ensures that `setNumber` works correctly for a wide range of inputs.

## Usage (Running Tests)

To run these tests, you will need to have Foundry installed. Navigate to your project's root directory and run:

```bash
forge test --match-path test/3_Formatter/Counter.t.sol -vvvvv
```

Foundry will compile the contracts and execute all test functions. The results will indicate whether the tests passed or failed, helping you verify the logic of your `Counter` contract.

This test contract is an excellent resource for learning how to write unit and fuzz tests for smart contracts, crucial skills for ensuring the security and correctness of your code on the blockchain.
